\hypertarget{_pointer_8hpp_source}{}\doxysection{Pointer.\+hpp}
\label{_pointer_8hpp_source}\index{include/glwpp/utils/Pointer.hpp@{include/glwpp/utils/Pointer.hpp}}
\mbox{\hyperlink{_pointer_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include <mutex>}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceglwpp}{glwpp}} \{}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{keyword}{namespace }detail \{}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{10 \textcolor{keyword}{struct }\mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control}{PointerControl}} \{}
\DoxyCodeLine{11     \textcolor{keyword}{template}<\textcolor{keyword}{typename} ... Args>}
\DoxyCodeLine{12     \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_af574ad2eb68cffb2601b74f6fa13ef9a}{PointerControl}}(Args\&\&... args) :}
\DoxyCodeLine{13         \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_a491452cf5cabab9189c48eb729cfae14}{strong\_counter}}(1),}
\DoxyCodeLine{14         \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_a5ce750acfef1ec5a3b7f2a757a04e52b}{weak\_counter}}(1),}
\DoxyCodeLine{15         \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_ae21e5d4f1d65fb7ab9d5c92d086f19fa}{data}}(new \mbox{\hyperlink{namespaceglwpp_a4c13abc6dd05c306b840819ed4191170ab9ece18c950afbfa6b0fdbfa4ff731d3}{T}}(std::forward<Args>(args)...))\{}
\DoxyCodeLine{16     \};}
\DoxyCodeLine{17 }
\DoxyCodeLine{18     std::mutex \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_a0c8239b3c8befe1c0d0e5d465f51c175}{lock}};}
\DoxyCodeLine{19     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_a491452cf5cabab9189c48eb729cfae14}{strong\_counter}};}
\DoxyCodeLine{20     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_a5ce750acfef1ec5a3b7f2a757a04e52b}{weak\_counter}};}
\DoxyCodeLine{21     \mbox{\hyperlink{namespaceglwpp_a4c13abc6dd05c306b840819ed4191170ab9ece18c950afbfa6b0fdbfa4ff731d3}{T}}* \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control_ae21e5d4f1d65fb7ab9d5c92d086f19fa}{data}};}
\DoxyCodeLine{22 \};}
\DoxyCodeLine{23 }
\DoxyCodeLine{24 \};}
\DoxyCodeLine{25 }
\DoxyCodeLine{26 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{27 \textcolor{keyword}{struct }\mbox{\hyperlink{structglwpp_1_1_strong_pointer}{StrongPointer}} \{}
\DoxyCodeLine{28     \textcolor{keyword}{template}<\textcolor{keyword}{typename} ... Args>}
\DoxyCodeLine{29     \mbox{\hyperlink{structglwpp_1_1_strong_pointer_abb4b97148d54311aa9a0ea1bfd886d2a}{StrongPointer}}(Args\&\&... args) :}
\DoxyCodeLine{30         \_control(new detail::PointerControl(std::forward<Args>(args)...))\{}
\DoxyCodeLine{31     \}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     \mbox{\hyperlink{structglwpp_1_1_strong_pointer_ac23736849935eb0860707bd154009afb}{\string~StrongPointer}}()\{}
\DoxyCodeLine{34         std::lock\_guard<std::mutex> lg(\_control-\/>lock);}
\DoxyCodeLine{35         -\/-\/\_control-\/>strong\_counter;}
\DoxyCodeLine{36         \textcolor{keywordflow}{if} (\_control-\/>strong\_counter == 0)\{}
\DoxyCodeLine{37             \textcolor{keyword}{delete} \_control-\/>data;}
\DoxyCodeLine{38             \_control-\/>data = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{39         \}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41         -\/-\/\_control-\/>weak\_counter;}
\DoxyCodeLine{42         \textcolor{keywordflow}{if} (\_control-\/>weak\_counter == 0)\{}
\DoxyCodeLine{43             \textcolor{keyword}{delete} \_control;}
\DoxyCodeLine{44         \}}
\DoxyCodeLine{45     \}}
\DoxyCodeLine{46 }
\DoxyCodeLine{47 \textcolor{keyword}{private}:}
\DoxyCodeLine{48     \mbox{\hyperlink{structglwpp_1_1detail_1_1_pointer_control}{detail::PointerControl<T>}}* \_control;}
\DoxyCodeLine{49 }
\DoxyCodeLine{50 \};}
\DoxyCodeLine{51 }
\DoxyCodeLine{52 \} \textcolor{comment}{// namespace glwpp}}

\end{DoxyCode}
